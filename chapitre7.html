<!DOCTYPE html>
<html lang="fr" data-theme="light">
<title>Cours Python - Chapitre 7. La Gestion des Erreurs : Le Filet de S√©curit√© de Votre Code</title><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/><link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css" rel="stylesheet"/><link href="style.css" rel="stylesheet"/><body>

    <header class="main-header">
        <div class="header-brand">
            <img src="https://upload.wikimedia.org/wikipedia/commons/c/c3/Python-logo-notext.svg" alt="Python Logo">
            <span>Cours Python 2.7</span>
        </div>
        <nav class="header-nav">
            <a href="index.html" class="nav-link ">Accueil</a>
            <div class="dropdown">
                <span class="nav-link" style="cursor: pointer;">Chapitres ‚ñæ</span>
                <div class="dropdown-content"><a href="index.html">Table des Mati√®res</a><a href="chapitre1.html">Chapitre 1</a><a href="chapitre2.html">Chapitre 2</a><a href="chapitre3.html">Chapitre 3</a><a href="chapitre4.html">Chapitre 4</a><a href="chapitre5.html">Chapitre 5</a><a href="chapitre6.html">Chapitre 6</a><a href="chapitre7.html">Chapitre 7</a><a href="chapitre8.html">Chapitre 8</a><a href="chapitre9.html">Chapitre 9</a></div>
            </div>
            <div class="dropdown">
                <span class="nav-link" style="cursor: pointer;">Quiz ‚ñæ</span>
                <div class="dropdown-content"><a href="quiz.html?chapter=1">Quiz Chapitre 1</a><a href="quiz.html?chapter=2">Quiz Chapitre 2</a><a href="quiz.html?chapter=3">Quiz Chapitre 3</a><a href="quiz.html?chapter=4">Quiz Chapitre 4</a><a href="quiz.html?chapter=5">Quiz Chapitre 5</a><a href="quiz.html?chapter=6">Quiz Chapitre 6</a><a href="quiz.html?chapter=7">Quiz Chapitre 7</a><a href="quiz.html?chapter=8">Quiz Chapitre 8</a><a href="quiz.html?chapter=9">Quiz Chapitre 9</a></div>
            </div>
            <a href="tp.html" class="nav-link ">TP</a>
            <a href="corriges.html" class="nav-link ">Corrig√©s</a>
            <a href="conclusion.html" class="nav-link ">Conclusion</a>
            <button id="theme-toggle" class="theme-toggle" aria-label="Toggle Dark Mode">üåô</button>
        </nav>
    </header>
    <div class="container">
<main>
<section id="chap7">
<h2>Chapitre 7. La Gestion des Erreurs : Le Filet de S√©curit√© de Votre Code</h2>
<div class="alert alert-light">
<h5 class="alert-heading">üí° Analogie pour les d√©butants</h5>
<p>La gestion des erreurs, c'est comme mettre un <strong>filet de s√©curit√©</strong> sous un
                        trap√©ziste. Les erreurs sont in√©vitables : un utilisateur peut taper du texte au lieu d'un
                        nombre, un fichier peut √™tre manquant... Sans filet, le programme "plante". Avec le bloc
                        <code>try...except</code>, vous dites √† Python : "<strong>Essaie</strong> de faire cette
                        acrobatie. Si tu tombes, ne t'√©crase pas : atterris dans le filet et fais plut√¥t ceci."
                    </p>
</div>
<p>En programmation, les erreurs sont in√©vitables. Un utilisateur peut entrer des donn√©es invalides, un
                    fichier peut √™tre introuvable, ou une op√©ration math√©matique peut √™tre impossible (comme une
                    division par z√©ro). Sans une gestion ad√©quate, ces situations peuvent faire "planter" votre
                    programme, le rendant inutilisable. La gestion des erreurs est l'art de pr√©voir ces probl√®mes et de
                    fournir des m√©canismes pour que votre programme puisse y r√©agir de mani√®re contr√¥l√©e et √©l√©gante.
                </p>
<img alt="Diagramme de flux montrant le fonctionnement d'un bloc try-catch-finally" class="img-fluid rounded my-3 mx-auto d-block zoomable-image" src="https://embeddedinventor.com/wp-content/uploads/2023/04/2-2.png" style="max-width: 400px;"/>
<p>Le m√©canisme principal en Python pour la gestion des erreurs est le bloc <code>try...except</code>.
                    Il vous permet de "tenter" d'ex√©cuter un code potentiellement risqu√© et de "capturer" les erreurs
                    (appel√©es exceptions) qui pourraient survenir, afin de les traiter sans interrompre l'ex√©cution du
                    programme.</p>
<h3 id="c7-A">7-A. Le bloc <code>try...except</code> : Capturer les Impr√©vus</h3>
<p>La structure de base est simple : le code que vous pensez susceptible de g√©n√©rer une erreur est plac√©
                    dans le bloc <code>try</code>. Si une erreur se produit, l'ex√©cution du bloc <code>try</code> est
                    imm√©diatement arr√™t√©e, et le code du bloc <code>except</code> est ex√©cut√©. Si aucune erreur ne
                    survient dans le bloc <code>try</code>, le bloc <code>except</code> est ignor√©.</p>
<pre><code class="language-python"># Exemple 1: Gerer une entree utilisateur invalide
print "Entrez un nombre pour calculer son carre :"
nombre_str = raw_input()

try:
    # On essaie de convertir la chaine en nombre flottant
    nombre = float(nombre_str)
    carre = nombre ** 2
    print "Le carre de {0} est {1}".format(nombre, carre)
except ValueError:
    # Ce bloc s'execute UNIQUEMENT si une ValueError se produit (ex: l'utilisateur entre du texte)
    print "Erreur : Vous n'avez pas entre un nombre valide !"

print "\nLe programme continue apres le bloc try...except."
# Testez avec "5", puis avec "bonjour"
</code></pre>
<div class="alert alert-info">
<strong>Rappel :</strong> Sans le <code>try...except</code>, si l'utilisateur entrait "test", le
                    programme s'arr√™terait brutalement avec une <code>ValueError</code>. Gr√¢ce √† ce bloc, nous
                    "attrapons" l'erreur et affichons un message clair √† l'utilisateur, permettant au programme de
                    continuer.
                </div>
<h3 id="c7-B">7-B. G√©rer des Erreurs Sp√©cifiques et Multiples</h3>
<p>Il est possible (et recommand√©) de sp√©cifier le type d'exception que vous souhaitez capturer. Cela
                    permet de traiter diff√©rentes erreurs de mani√®re diff√©rente et d'√©viter de masquer des erreurs
                    inattendues. Vous pouvez avoir plusieurs blocs <code>except</code> pour g√©rer divers types
                    d'exceptions.</p>
<pre><code class="language-python"># Exemple: Division securisee
try:
    num1_str = raw_input("Entrez le numerateur : ")
    den_str = raw_input("Entrez le denominateur : ")

    numerateur = float(num1_str)
    denominateur = float(den_str)

    resultat = numerateur / denominateur
    print "Le resultat de la division est", resultat

except ValueError:
    # S'execute si float() echoue pour le numerateur ou le denominateur
    print "Erreur : Veuillez entrer des nombres valides pour le numerateur et le denominateur."
except ZeroDivisionError:
    # S'execute si on essaie de diviser par zero
    print "Erreur : Le denominateur ne peut pas etre zero."
except Exception as e:
    # Un 'except' general qui attrape toutes les autres erreurs possibles
    # 'as e' permet de recuperer l'objet exception pour afficher plus de details
    print "Une erreur inattendue est survenue :", e
# Testez avec: "10", "2" -&gt; 5.0
# Testez avec: "dix", "2" -&gt; Erreur ValueError
# Testez avec: "10", "0" -&gt; Erreur ZeroDivisionError
</code></pre>
<div class="alert alert-warning">
<strong>Bonne Pratique :</strong> Capturez toujours les exceptions les plus sp√©cifiques en premier,
                    puis les plus g√©n√©rales. Un <code>except</code> sans sp√©cifier de type d'erreur
                    (<code>except:</code>) est tr√®s g√©n√©ral et peut masquer des bugs. Il est pr√©f√©rable d'utiliser
                    <code>except Exception as e:</code> pour au moins loguer l'erreur.
                </div>
<h3 id="c7-C">7-C. Le bloc <code>else</code> : Quand tout va bien</h3>
<p>Le bloc <code>else</code>, s'il est pr√©sent, est ex√©cut√© uniquement si le bloc <code>try</code> se
                    termine sans aucune exception. C'est un endroit id√©al pour placer le code qui d√©pend du succ√®s de
                    l'op√©ration dans le <code>try</code>, mais qui n'est pas lui-m√™me susceptible de lever une
                    exception.</p>
<pre><code class="language-python"># Exemple: Traitement apres validation
try:
    age_str = raw_input("Quel est votre age ? ")
    age = int(age_str)
except ValueError:
    print "Erreur : L'age doit etre un nombre entier."
else:
    # Ce bloc s'execute UNIQUEMENT si aucune exception n'a ete levee dans le 'try'
    if age &lt; 18:
        print "Vous etes mineur."
    else:
        print "Vous etes majeur."
# Testez avec: "20", puis "quinze"
</code></pre>
<h3 id="c7-D">7-D. Le bloc <code>finally</code> : Quoi qu'il arrive</h3>
<p>Le bloc <code>finally</code> est toujours ex√©cut√©, qu'une exception ait √©t√© lev√©e ou non, et qu'elle
                    ait √©t√© g√©r√©e ou non. Il est couramment utilis√© pour des op√©rations de nettoyage, comme la fermeture
                    de fichiers ou de connexions √† des bases de donn√©es, afin de s'assurer que les ressources sont
                    correctement lib√©r√©es.</p>
<pre><code class="language-python"># Exemple: Nettoyage de ressources
fichier = None # Initialisation pour s'assurer que 'fichier' existe meme si l'ouverture echoue
try:
    nom_fichier = raw_input("Entrez le nom du fichier a ouvrir : ")
    fichier = open(nom_fichier, "r") # Potentiellement une IOError
    contenu = fichier.read()
    print "Contenu du fichier:\n", contenu
except IOError:
    print "Erreur : Le fichier '{0}' est introuvable ou illisible.".format(nom_fichier)
except Exception as e:
    print "Une erreur inattendue est survenue :", e
finally:
    # Ce bloc s'execute toujours
    if fichier: # Verifie si le fichier a ete ouvert avec succes
        fichier.close()
        print "Le fichier a ete ferme."
    else:
        print "Aucun fichier n'a ete ouvert."
# Testez avec: "fichier_inexistant.txt", puis un fichier existant
</code></pre>
<hr class="my-5"/>
<div class="card my-4">
<div class="card-body">
<h4 class="card-title">R√©sum√© du Chapitre 7</h4>
<ol>
<li><strong><code>try</code> :</strong> Contient le code potentiellement risqu√©.</li>
<li><strong><code>except</code> :</strong> Capture et g√®re les exceptions sp√©cifiques ou
                                g√©n√©rales.</li>
<li><strong><code>else</code> :</strong> Ex√©cut√© si le bloc <code>try</code> se termine sans
                                exception.</li>
<li><strong><code>finally</code> :</strong> Toujours ex√©cut√©, id√©al pour le nettoyage des
                                ressources.</li>
<li><strong>Bonne Pratique :</strong> G√©rer les exceptions sp√©cifiques avant les g√©n√©rales.
                            </li>
</ol>
</div>
</div>
<div class="card my-4">
<div class="card-body">
<h4 class="card-title">Exercices Corrig√©s</h4>
<h5 class="mt-3">Exercice 1 : Calculatrice Simple et Robuste</h5>
<p>√âcrivez un programme qui demande √† l'utilisateur deux nombres et une op√©ration (+, -, *, /).
                            Effectuez l'op√©ration et affichez le r√©sultat. G√©rez les erreurs suivantes : entr√©e non
                            num√©rique, division par z√©ro, op√©ration invalide.</p>
<pre><code class="language-python"># Correction Exercice 1
while True:
    try:
        num1_str = raw_input("Entrez le premier nombre (ou 'q' pour quitter): ")
        if num1_str.lower() == 'q':
            break
        num1 = float(num1_str)

        num2_str = raw_input("Entrez le deuxieme nombre: ")
        num2 = float(num2_str)

        operation = raw_input("Entrez l'operation (+, -, *, /): ")

        if operation == '+':
            resultat = num1 + num2
        elif operation == '-':
            resultat = num1 - num2
        elif operation == '*':
            resultat = num1 * num2
        elif operation == '/':
            resultat = num1 / num2
        else:
            print "Operation invalide. Veuillez utiliser +, -, * ou /."
            continue # Revient au debut de la boucle pour redemander l'operation

        print "Resultat : {0} {1} {2} = {3}".format(num1, operation, num2, resultat)

    except ValueError:
        print "Erreur : Veuillez entrer des nombres valides."
    except ZeroDivisionError:
        print "Erreur : Division par zero impossible."
    except Exception as e:
        print "Une erreur inattendue est survenue :", e
    print "------------------------------------"
print "Calculatrice fermee."
</code></pre>
<h5 class="mt-3">Exercice 2 : Lecture de Fichier S√©curis√©e</h5>
<p>Demandez √† l'utilisateur le nom d'un fichier. Tentez de lire son contenu et de l'afficher. Si
                            le fichier n'existe pas, affichez un message d'erreur appropri√©. Assurez-vous que le fichier
                            est toujours ferm√©, m√™me en cas d'erreur.</p>
<pre><code class="language-python"># Correction Exercice 2
fichier_ouvert = None
try:
    nom_fichier = raw_input("Entrez le nom du fichier a lire : ")
    fichier_ouvert = open(nom_fichier, "r")
    contenu = fichier_ouvert.read()
    print "\n--- Contenu du fichier '{0}' ---\n{1}\n---------------------------------".format(nom_fichier, contenu)
except IOError:
    print "Erreur : Le fichier '{0}' est introuvable ou vous n'avez pas les permissions de lecture.".format(nom_fichier)
except Exception as e:
    print "Une erreur inattendue est survenue lors de la lecture :", e
finally:
    if fichier_ouvert:
        fichier_ouvert.close()
        print "Le fichier a ete ferme avec succes."
    else:
        print "Aucun fichier n'a ete ouvert."
</code></pre>
</div>
</div>
</section></main>
<div class="chapter-nav"><a href="chapitre6.html" class="btn">‚Üê Pr√©c√©dent</a><a href="chapitre8.html" class="btn">Suivant ‚Üí</a></div><footer class="footer mt-auto py-3 bg-light text-center"><div class="container"><span class="text-muted">¬© 2025 Cours Python 2.7 - Mokrane KARAR. Tous droits r√©serv√©s.</span></div></footer></div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
<script src="script.js"></script>
</body></html>